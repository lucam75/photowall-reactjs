(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{37:function(e,t,n){e.exports=n(58)},57:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"startAddingPost",function(){return G}),n.d(a,"startLoadingPost",function(){return _}),n.d(a,"startRemovingPost",function(){return x}),n.d(a,"startAddingComment",function(){return I}),n.d(a,"startLoadingComments",function(){return T}),n.d(a,"loadComments",function(){return M}),n.d(a,"removePost",function(){return W}),n.d(a,"addPost",function(){return R}),n.d(a,"addComment",function(){return U}),n.d(a,"loadPosts",function(){return K}),n.d(a,"LoginWithFirebase",function(){return z}),n.d(a,"LoginWithGoogle",function(){return J}),n.d(a,"startTesting",function(){return V}),n.d(a,"setUserData",function(){return B});var o=n(0),r=n.n(o),c=n(23),i=n.n(c),s=n(5),l=n(6),u=n(8),m=n(7),p=n(9),d=n(11),h=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("nav",{className:"navbar navbar-light bg-light"},r.a.createElement("h1",null,r.a.createElement(d.b,{to:"/"},this.props.title)),this.props.user.email?r.a.createElement(d.b,{className:"add-photo btn btn-primary",to:"/AddPhoto"},"Add Photo"):"",this.props.user.email?r.a.createElement("span",null,this.props.user.email):r.a.createElement(d.b,{className:"",to:"/Login"},r.a.createElement("span",{className:"logInIcon"})))))}}]),t}(o.Component);var f=function(e){var t=e.post;return r.a.createElement("figure",{className:"figure"},r.a.createElement(d.b,{to:"/Single/".concat(t.id)},r.a.createElement("img",{src:t.imageLink,className:"photo",alt:t.description})),r.a.createElement("figcaption",null,r.a.createElement("p",null,t.description)),r.a.createElement("div",{className:"button-container"},r.a.createElement(d.b,{className:"button",to:"",onClick:function(){e.startRemovingPost(e.index,t.id),e.history.push("/")}},"Remove"),r.a.createElement(d.b,{className:"button",to:"/Single/"+t.id},r.a.createElement("div",{className:"comment-count"},r.a.createElement("div",{className:"speech-bubble"}),e.comments[t.id]?e.comments[t.id].length:0))))};var b=function(e){return r.a.createElement("div",null,r.a.createElement("div",{className:"photoGrid row"},e.posts.sort(function(e,t){return t.id-e.id}).map(function(t,n){return r.a.createElement(f,Object.assign({key:n,post:t},e,{index:n}))})))},g=n(10),v=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).handleSubmit=e.handleSubmit.bind(Object(g.a)(e)),e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=e.target.elements.link.value,n=e.target.elements.description.value;if(t&&n){var a={id:Number(new Date),description:n,imageLink:t};this.props.startAddingPost(a),this.props.history.push("/")}}},{key:"render",value:function(){return r.a.createElement("div",{className:"form"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",placeholder:"Link",name:"link"}),r.a.createElement("input",{type:"text",placeholder:"Description",name:"description"}),r.a.createElement("button",null,"Post")))}}]),t}(o.Component),E=n(16),O=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).handleSubmit=e.handleSubmit.bind(Object(g.a)(e)),e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=e.target.elements.comment.value;this.props.startAddingComment(t,this.props.id),e.target.elements.comment.value=""}},{key:"render",value:function(){return r.a.createElement("div",{className:"comment"},this.props.comments.map(function(e,t){return r.a.createElement("p",{key:t}," ",e," ")}),this.props.user?r.a.createElement("form",{className:"comment-form",onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",placeholder:"comment",name:"comment"}),r.a.createElement("input",{type:"submit"})):"Log in to comment")}}]),t}(o.Component),j=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.posts,n=e.match,a=Number(n.params.id),o=t.find(function(e){return e.id===a}),c=this.props.comments[a]||[],i=this.props.posts.findIndex(function(e){return e.id===a});return!0===this.props.loading?r.a.createElement("div",{className:"loader"},"...loading"):o?r.a.createElement("div",{className:"single-photo"},r.a.createElement(f,Object.assign({post:o},this.props,{index:i})),r.a.createElement(O,{startAddingComment:this.props.startAddingComment,comments:c,id:a})):r.a.createElement("h1",null," ..no post found")}}]),t}(o.Component),y=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).handleSubmit=e.handleSubmit.bind(Object(g.a)(e)),e.loginWithGoogle=e.loginWithGoogle.bind(Object(g.a)(e)),e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n=e.target.elements.email.value,a=e.target.elements.password.value;n&&a&&this.props.LoginWithFirebase(n,a).then(function(){t.props.user.email&&t.props.history.push("/")})}},{key:"loginWithGoogle",value:function(e){var t=this;e.preventDefault(),this.props.LoginWithGoogle().then(function(){t.props.user.email&&t.props.history.push("/")})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"form"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",placeholder:"Email",name:"email"}),r.a.createElement("input",{type:"password",placeholder:"Password",name:"password"}),r.a.createElement("button",null,"Log in with User and Password"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 text-center"},r.a.createElement("p",null,"Or"))),r.a.createElement("div",{className:"form"},r.a.createElement("button",{className:"sign-with-google-button",onClick:this.loginWithGoogle},r.a.createElement("img",{width:"20px",alt:'Google "G" Logo',src:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/53/Google_%22G%22_Logo.svg/512px-Google_%22G%22_Logo.svg.png"}),"Sign in with Google")))}}]),t}(o.Component),S=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={loading:!0},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.startLoadingPost(),this.props.startLoadingComments().then(function(){e.setState({loading:!1})})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Main container-fluid"},r.a.createElement(h,Object.assign({title:"Photowall"},this.props)),r.a.createElement(E.a,{path:"/Login",render:function(){return r.a.createElement("div",null,r.a.createElement(y,e.props))}}),r.a.createElement(E.a,{exact:!0,path:"/",render:function(){return r.a.createElement("div",null,r.a.createElement(b,e.props))}}),r.a.createElement(E.a,{path:"/AddPhoto",render:function(){return r.a.createElement("div",null,r.a.createElement(v,e.props))}}),r.a.createElement(E.a,{path:"/Single/:id",render:function(t){return r.a.createElement("div",null,r.a.createElement(j,Object.assign({loading:e.state.loading},e.props,t)))}}))}}]),t}(o.Component),w=n(25),N=n(15),k=n(17),D=n(21),L=n.n(D);n(51),n(54);L.a.initializeApp({apiKey:"AIzaSyDYaVuVpIBDDSbQLK4wNYzF2SKKRXK2Hz8",authDomain:"photowall-e5230.firebaseapp.com",databaseURL:"https://photowall-e5230.firebaseio.com",projectId:"photowall-e5230",storageBucket:"photowall-e5230.appspot.com",messagingSenderId:"726190033409",appId:"1:726190033409:web:81e47f8c68236a02"});var P=L.a.database(),A=L.a.auth(),C=new L.a.auth.GoogleAuthProvider;function G(e){return function(t){return P.ref("posts").update(Object(k.a)({},e.id,e)).then(function(){}).catch(function(e){console.log(e)})}}function _(){return function(e){return P.ref().child("posts").on("value",function(t){var n=[];t.forEach(function(e){n.push(e.val())}),e(K(n))})}}function x(e,t){var n,a=(n={},Object(k.a)(n,"posts/".concat(t),null),Object(k.a)(n,"comments/".concat(t),null),n);return function(t){return P.ref().update(a).then(function(){t(W(e))}).catch(function(e){console.log(e)})}}function I(e,t){return function(n){return P.ref("comments/"+t).push(e).then(function(){n(U(e,t))}).catch(function(e){console.log(e)})}}function T(){return function(e){return P.ref("comments").once("value").then(function(t){var n={};t.forEach(function(e){n[e.key]=Object.values(e.val())}),e(M(n))}).catch(function(e){console.log(e)})}}function M(e){return{type:"LOAD_COMMENTS",comments:e}}function W(e){return{type:"REMOVE_POST",index:e}}function R(e){return{type:"ADD_POST",post:e}}function U(e,t){return{type:"ADD_COMMENT",comment:e,postId:t}}function K(e){return{type:"LOAD_POSTS",posts:e}}function z(e,t){return function(n){return A.signInWithEmailAndPassword(e,t).catch(function(e){alert(e.message)}).then(function(){console.log(A.currentUser),n(B(A.currentUser))})}}function J(){return function(e){return A.signInWithPopup(C).then(function(t){var n=t.user;console.log("User from Google"),console.log(JSON.stringify(n)),e(B(n))}).catch(function(e){console.log(JSON.stringify(e))})}}function V(){return function(e){return A.onAuthStateChanged(function(t){t?(console.log("user login"),e(B(t))):console.log("user signed out")})}}function B(e){return{type:"SET_LOGGED_USER",user:e}}var F=Object(E.d)(Object(w.b)(function(e){return{posts:e.posts,comments:e.comments,user:e.user}},function(e){return Object(N.b)(a,e)})(S)),Y=n(22),H=n(29),Q=[];var X=Object(N.c)({posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOVE_POST":return[].concat(Object(Y.a)(e.slice(0,t.index)),Object(Y.a)(e.slice(t.index+1)));case"ADD_POST":return[].concat(Object(Y.a)(e),[t.post]);case"LOAD_POSTS":return t.posts;default:return e}},comments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_COMMENT":return e[t.postId]?Object(H.a)({},e,Object(k.a)({},t.postId,[].concat(Object(Y.a)(e[t.postId]),[t.comment]))):Object(H.a)({},e,Object(k.a)({},t.postId,[t.comment]));case"LOAD_COMMENTS":return t.comments;default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOGGED_USER":return t.user;default:return e}}}),q=n(36),Z=(n(56),n(57),Object(N.e)(X,Object(N.d)(Object(N.a)(q.a))));i.a.render(r.a.createElement(w.a,{store:Z},r.a.createElement(d.a,null,r.a.createElement(F,null))),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.a5d8c632.chunk.js.map